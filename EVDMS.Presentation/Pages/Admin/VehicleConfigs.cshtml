@page
@model EVDMS.Presentation.Pages.Admin.VehicleConfigsModel
@{
    ViewData["Title"] = "Quản lý Cấu hình xe";
    Layout = "_AdminLayout";
}

@if (!string.IsNullOrEmpty(Model.SuccessMessage))
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        @Model.SuccessMessage
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}
@if (!string.IsNullOrEmpty(Model.ErrorMessage))
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        @Model.ErrorMessage
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<div class="container-fluid pt-4 px-4">
    <div class="row g-4">
        <div class="col-12">
            <div class="bg-secondary rounded h-100 p-4">
                <h4 class="mb-4">@ViewData["Title"]</h4>

                <div class="d-flex align-items-center justify-content-between mb-4">
                    <p class="mb-0">
                        Xem danh sách tất cả các cấu hình xe trong hệ thống.
                        <br />
                        <span class="text-warning small">Lưu ý: Chức năng Thêm/Sửa cấu hình được thực hiện tại trang "Quản lý Mẫu xe".</span>
                    </p>
                    <a asp-page="./VehicleModels" class="btn btn-info">
                        <i class="fa fa-car me-2"></i>Đi đến Mẫu xe
                    </a>
                </div>

                <div class="table-responsive">
                    <table class="table text-start align-middle table-bordered table-hover mb-0">
                        <thead>
                            <tr class="text-white">
                                <th scope="col">Mẫu xe liên kết</th>
                                <th scope="col">Tên Phiên bản</th>
                                <th scope="col">Giá cơ bản</th>
                                <th scope="col">Màu sắc</th>
                                <th scope="col">Nội thất</th>
                                <th scope="col">Bảo hành (tháng)</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                            @if (Model.VehicleConfigs.Any())
                            {
                                @foreach (var item in Model.VehicleConfigs)
                                {
                                    <tr>
                                        <td>
                                            @if (item.VehicleModel != null)
                                            {
                                                <a asp-page="./VehicleModels/Edit" asp-route-id="@item.VehicleModel.Id">
                                                    <strong>@item.VehicleModel.ModelName</strong>
                                                </a>
                                            }
                                            else
                                            {
                                                <span class="text-danger">Không có </span>
                                            }
                                        </td>
                                        <td>@item.VersionName</td>
                                        <td>@item.BasePrice.ToString("N0") VNĐ</td>
                                        <td>@item.Color</td>
                                        <td>@item.InteriorType</td>
                                        <td>@item.WarrantyPeriod</td>
                                        
                                    </tr>
                                }
                            }
                            else
                            {
                                <tr>
                                    <td colspan="7" class="text-center">Không tìm thấy cấu hình nào.</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>