@page
@model IndexModel
@{
    Layout = "Shared/_AdminLayout";
    ViewData["Title"] = "Admin Dashboard";
    var latest = Model.AdminIndexResponses.LastOrDefault();
}
<div class="page-header">
    <div class="container">
        <h1><i class="fas fa-tachometer-alt me-3"></i>@ViewData["Title"]</h1>
        <p class="mb-0">Welcome back! Here's what's happening this month.</p>
    </div>
</div>

<div class="admin-page-content mt-5">
    <div class="container">
        <div class="row g-4">

            <!-- ACCOUNTS -->
            <div class="col-xl-3 col-md-6">
                <div class="card shadow-sm border-0 rounded-4 hover-shadow-sm">
                    <div class="card-body d-flex align-items-center p-4">
                        <div
                            class="stats-icon bg-primary bg-gradient text-white me-3 rounded-circle d-flex align-items-center justify-content-center"
                            style="width: 50px; height: 50px;">
                            <i class="fas fa-users fa-lg"></i>
                        </div>
                        <div>
                            <h6 class="text-muted mb-1 fw-semibold">Total Accounts</h6>
                            <h3 class="fw-bold text-primary mb-1">@latest?.NewDealCount</h3>
                            <small class="@(latest?.DealGrowth >= 0 ? "text-success" : "text-danger") fw-medium">
                                <i class="fas @(latest?.DealGrowth >= 0 ? "fa-arrow-up" : "fa-arrow-down") me-1"></i>
                                @Math.Abs(latest?.DealGrowth ?? 0)% this month
                            </small>
                        </div>
                    </div>
                    <div class="card-footer bg-light border-0 text-center py-3 rounded-bottom-4">
                        <a href="/Admin/Accounts" class="btn btn-sm btn-outline-primary rounded-pill px-3">View
                            Details</a>
                    </div>
                </div>
            </div>

            <!-- VEHICLE -->
            <div class="col-xl-3 col-md-6">
                <div class="card shadow-sm border-0 rounded-4 hover-shadow-sm">
                    <div class="card-body d-flex align-items-center p-4">
                        <div
                            class="stats-icon bg-success bg-gradient text-white me-3 rounded-circle d-flex align-items-center justify-content-center"
                            style="width: 50px; height: 50px;">
                            <i class="fas fa-car fa-lg"></i>
                        </div>
                        <div>
                            <h6 class="text-muted mb-1 fw-semibold">Vehicle Models</h6>
                            <h3 class="fw-bold text-success mb-1">@latest?.NewVechicleCount</h3>
                            <small class="@(latest?.VehicleGrowth >= 0 ? "text-success" : "text-danger") fw-medium">
                                <i class="fas @(latest?.VehicleGrowth >= 0 ? "fa-arrow-up" : "fa-arrow-down") me-1"></i>
                                @Math.Abs(latest?.VehicleGrowth ?? 0)% this month
                            </small>
                        </div>
                    </div>
                    <div class="card-footer bg-light border-0 text-center py-3 rounded-bottom-4">
                        <a href="/Admin/VehicleModels" class="btn btn-sm btn-outline-success rounded-pill px-3">Manage
                            Models</a>
                    </div>
                </div>
            </div>

            <!-- ORDERS -->
            <div class="col-xl-3 col-md-6">
                <div class="card shadow-sm border-0 rounded-4 hover-shadow-sm">
                    <div class="card-body d-flex align-items-center p-4">
                        <div
                            class="stats-icon bg-warning bg-gradient text-white me-3 rounded-circle d-flex align-items-center justify-content-center"
                            style="width: 50px; height: 50px;">
                            <i class="fas fa-shopping-cart fa-lg"></i>
                        </div>
                        <div>
                            <h6 class="text-muted mb-1 fw-semibold">Orders</h6>
                            <h3 class="fw-bold text-warning mb-1">@latest?.NewOrderCount</h3>
                            <small class="@(latest?.OrderGrowth >= 0 ? "text-success" : "text-danger") fw-medium">
                                <i class="fas @(latest?.OrderGrowth >= 0 ? "fa-arrow-up" : "fa-arrow-down") me-1"></i>
                                @Math.Abs(latest?.OrderGrowth ?? 0)% this month
                            </small>
                        </div>
                    </div>
                    <div class="card-footer bg-light border-0 text-center py-3 rounded-bottom-4">
                        <a href="/Admin/Orders" class="btn btn-sm btn-outline-warning rounded-pill px-3">View Orders</a>
                    </div>
                </div>
            </div>

            <!-- CUSTOMERS -->
            <div class="col-xl-3 col-md-6">
                <div class="card shadow-sm border-0 rounded-4 hover-shadow-sm">
                    <div class="card-body d-flex align-items-center p-4">
                        <div
                            class="stats-icon bg-info bg-gradient text-white me-3 rounded-circle d-flex align-items-center justify-content-center"
                            style="width: 50px; height: 50px;">
                            <i class="fas fa-user-friends fa-lg"></i>
                        </div>
                        <div>
                            <h6 class="text-muted mb-1 fw-semibold">New Customers</h6>
                            <h3 class="fw-bold text-info mb-1">@latest?.NewCustomerCount</h3>
                            <small class="@(latest?.CustomerGrowth >= 0 ? "text-success" : "text-danger") fw-medium">
                                <i class="fas @(latest?.CustomerGrowth >= 0 ? "fa-arrow-up" : "fa-arrow-down") me-1"></i>
                                @Math.Abs(latest?.CustomerGrowth ?? 0)% this month
                            </small>
                        </div>
                    </div>
                    <div class="card-footer bg-light border-0 text-center py-3 rounded-bottom-4">
                        <a href="/Admin/Customers" class="btn btn-sm btn-outline-info rounded-pill px-3">Manage
                            Customers</a>
                    </div>
                </div>
            </div>

        </div>

        <!-- Quick Actions Section -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="admin-card">
                    <div class="card-header d-flex align-items-center justify-content-between p-2">
                        <h5 class="mb-0 fw-bold">
                            <i class="fas fa-bolt me-2"></i>Quick Actions
                        </h5>
                        <small class="text-white-50">Frequently used admin functions</small>
                    </div>
                    <div class="card-body p-4">
                        <div class="row g-3">
                            <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6"><a href="/Admin/Accounts"
                                                                                class="quick-action-btn">
                                    <div class="quick-action-icon bg-primary bg-gradient"><i class="fas fa-users"></i>
                                    </div>
                                    <h6 class="fw-semibold mb-1">Manage Accounts</h6> <small class="text-muted">User
                                        management</small> </a></div>
                            <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6"><a href="/Admin/VehicleModels"
                                                                                class="quick-action-btn">
                                    <div class="quick-action-icon bg-success bg-gradient"><i class="fas fa-car"></i>
                                    </div>
                                    <h6 class="fw-semibold mb-1">Car Models</h6> <small class="text-muted">Vehicle
                                        catalog</small> </a></div>
                            <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6"><a href="/Admin/Orders"
                                                                                class="quick-action-btn">
                                    <div class="quick-action-icon bg-warning bg-gradient"><i
                                            class="fas fa-shopping-cart"></i></div>
                                    <h6 class="fw-semibold mb-1">View Orders</h6> <small class="text-muted">Order
                                        management</small> </a></div>
                            <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6"><a href="/Admin/Dealers"
                                                                                class="quick-action-btn">
                                    <div class="quick-action-icon bg-info bg-gradient"><i class="fas fa-store"></i>
                                    </div>
                                    <h6 class="fw-semibold mb-1">Manage Dealers</h6> <small class="text-muted">Dealer
                                        network</small> </a></div>
                            <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6"><a href="/Admin/Customers"
                                                                                class="quick-action-btn">
                                    <div class="quick-action-icon bg-secondary bg-gradient"><i
                                            class="fas fa-user-friends"></i></div>
                                    <h6 class="fw-semibold mb-1">View Customers</h6> <small class="text-muted">Customer
                                        base</small> </a></div>
                            <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6"><a href="/Admin/Inventory"
                                                                                class="quick-action-btn">
                                    <div class="quick-action-icon bg-dark bg-gradient"><i class="fas fa-warehouse"></i>
                                    </div>
                                    <h6 class="fw-semibold mb-1">Check Inventory</h6> <small class="text-muted">Stock
                                        levels</small> </a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* ✅ Fix mất border-radius card */
    .row.g-4 > [class*="col-"] {
        display: flex;
        align-items: stretch;
    }

    .row.g-4 .card {
        flex: 1 1 100%;
        display: flex;
        flex-direction: column;
        border-radius: 1rem;
        overflow: visible;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
    }

    .row.g-4 .card-footer {
        margin-top: auto;
        border-top: 1px solid rgba(0, 0, 0, 0.05);
        border-radius: 0 0 1rem 1rem;
    }

    .hover-shadow-sm:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        transition: all 0.25s ease;
    }

    .admin-page-content .container {
        overflow: visible;
    }

    /* ✅ Giữ trang không scroll */
    html, body {
        height: 100%;
        overflow: hidden;
    }

    .admin-page-content {
        height: calc(100vh - 120px);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    /* Khoảng cách giữa các hàng hợp lý hơn */
    .row.g-4 {
        margin-bottom: 2.5rem; /* tạo khoảng cách mềm mại giữa 2 section */
    }

    /* Fix phần Quick Actions cho đều và thoáng hơn */
    .row.mb-5 {
        margin-top: 1rem; /* tạo không gian hợp lý sau section đầu */
    }

    .hover-shadow-sm:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease-in-out;
    }

    .stats-icon {
        width: 60px;
        height: 60px;
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        color: white;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    }

    .quick-action-btn {
        display: block;
        text-decoration: none;
        color: inherit;
        text-align: center;
        padding: 1.5rem 1rem;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        height: 100%;
    }

    .quick-action-btn:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        text-decoration: none;
        color: inherit;
        background: rgba(255, 255, 255, 0.9);
    }

    .quick-action-icon {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        color: white;
        margin: 0 auto 1rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .activity-content h6 {
        font-size: 0.9rem;
        margin-bottom: 0.25rem;
    }

    .activity-content p {
        font-size: 0.85rem;
        margin-bottom: 0.25rem;
    }

    .alert-warning .alert-icon {
        background: rgba(255, 193, 7, 0.2);
        color: #856404;
    }

    .alert-info .alert-icon {
        background: rgba(13, 202, 240, 0.2);
        color: #055160;
    }

    .alert-success .alert-icon {
        background: rgba(25, 135, 84, 0.2);
        color: #0f5132;
    }

    .alert-danger .alert-icon {
        background: rgba(220, 53, 69, 0.2);
        color: #721c24;
    }
</style>